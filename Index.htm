<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Toko Mini Amba ðŸ˜†</title>

  <style>
    body{
      font-family: system-ui, sans-serif;
      margin:0;
      background:#f3f4f6;
      transition:.3s;
    }

    header{
      background:#111;
      color:white;
      padding:12px;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }

    .dark{
      background:#111;
      color:white;
    }

    .container{
      padding:15px;
    }

    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
      gap:12px;
    }

    .card{
      background:white;
      padding:10px;
      border-radius:10px;
      box-shadow:0 2px 6px rgba(0,0,0,.1);
      transition:.2s;
    }

    .dark .card{
      background:#222;
    }

    .card img{
      width:100%;
      height:140px;
      object-fit:cover;
      border-radius:8px;
    }

    button{
      padding:6px 10px;
      border:none;
      border-radius:6px;
      cursor:pointer;
      background:#2563eb;
      color:white;
    }

    input,select{
      padding:6px;
      margin:5px 0;
      width:100%;
    }

    #cart{
      position:fixed;
      right:0;
      top:0;
      width:250px;
      height:100%;
      background:#fff;
      box-shadow:-3px 0 8px rgba(0,0,0,.2);
      padding:10px;
      overflow:auto;
    }

    .dark #cart{
      background:#222;
    }

    .admin{
      margin-top:25px;
      padding:10px;
      background:#ddd;
      border-radius:10px;
    }
  </style>
</head>

<body>

<header>
  <h3>ðŸ›’ Toko Mini</h3>
  <div>
    <button onclick="toggleDark()">ðŸŒ™</button>
    <button onclick="toggleCart()">Cart (<span id="cartCount">0</span>)</button>
  </div>
</header>

<div class="container">

  <input id="search" placeholder="Cari produk..." oninput="renderProducts()"/>

  <select id="filter" onchange="renderProducts()">
    <option value="">Semua</option>
    <option>Baju</option>
    <option>Sepatu</option>
    <option>Celana</option>
  </select>

  <div class="grid" id="products"></div>

  <!-- ADMIN -->
  <div class="admin">
    <h4>Admin Tambah Produk</h4>
    <input id="name" placeholder="Nama produk">
    <input id="price" type="number" placeholder="Harga">
    <input id="img" placeholder="Link gambar">
    <select id="cat">
      <option>Baju</option>
      <option>Sepatu</option>
      <option>Celana</option>
    </select>
    <button onclick="addProduct()">Tambah</button>
  </div>

</div>

<!-- CART -->
<div id="cart" style="display:none">
  <h3>Keranjang</h3>
  <div id="cartItems"></div>
  <h4>Total: Rp <span id="total">0</span></h4>
</div>

<script>
let products = JSON.parse(localStorage.getItem("products")) || [
  {name:"Kaos Hitam", price:50000, img:"https://picsum.photos/200?1", cat:"Baju"},
  {name:"Sepatu Sport", price:150000, img:"https://picsum.photos/200?2", cat:"Sepatu"}
];

let cart = JSON.parse(localStorage.getItem("cart")) || [];

function save(){
  localStorage.setItem("products",JSON.stringify(products));
  localStorage.setItem("cart",JSON.stringify(cart));
}

function renderProducts(){
  const wrap = document.getElementById("products");
  wrap.innerHTML="";

  const search = document.getElementById("search").value.toLowerCase();
  const filter = document.getElementById("filter").value;

  products
    .filter(p => p.name.toLowerCase().includes(search))
    .filter(p => !filter || p.cat===filter)
    .forEach((p,i)=>{
      wrap.innerHTML += `
        <div class="card">
          <img src="${p.img}">
          <h4>${p.name}</h4>
          <p>Rp ${p.price}</p>
          <button onclick="addToCart(${i})">Tambah</button>
        </div>
      `;
    });
}

function addProduct(){
  const name = document.getElementById("name").value;
  const price = +document.getElementById("price").value;
  const img = document.getElementById("img").value;
  const cat = document.getElementById("cat").value;

  products.push({name,price,img,cat});
  save();
  renderProducts();
}

function addToCart(i){
  cart.push(products[i]);
  save();
  renderCart();
}

function renderCart(){
  const wrap = document.getElementById("cartItems");
  wrap.innerHTML="";
  let total=0;

  cart.forEach((c,idx)=>{
    total+=c.price;
    wrap.innerHTML+=`
      <p>${c.name} - ${c.price}
      <button onclick="removeCart(${idx})">x</button></p>
    `;
  });

  document.getElementById("total").textContent = total;
  document.getElementById("cartCount").textContent = cart.length;
}

function removeCart(i){
  cart.splice(i,1);
  save();
  renderCart();
}

function toggleCart(){
  const c=document.getElementById("cart");
  c.style.display = c.style.display==="none"?"block":"none";
}

function toggleDark(){
  document.body.classList.toggle("dark");
}

renderProducts();
renderCart();
</script>

</body>
</html>
